<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNTT Diamond Network - Admin Panel</title>
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/images/logo.png">
</head>
<body>
    <!-- Loading Screen -->
    <div id="adminLoading" class="loading-screen">
        <div class="loading-content">
            <div class="admin-loader"></div>
            <h3>Loading Admin Panel</h3>
        </div>
    </div>

    <!-- Login Form -->
    <div id="loginForm" class="login-container">
        <div class="login-card diamond-card">
            <div class="login-header">
                <div class="admin-logo">
                    <i class="fas fa-crown"></i>
                </div>
                <h2>VNTT Admin Panel</h2>
                <p>Restricted Access</p>
            </div>
            
            <div class="login-body">
                <div class="form-group">
                    <label>Admin Password</label>
                    <div class="input-group">
                        <input type="password" id="adminPassword" 
                               class="form-control" 
                               placeholder="Enter admin password">
                        <button class="btn-eye" type="button" onclick="togglePassword()">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Security Code (Optional)</label>
                    <input type="text" id="securityCode" 
                           class="form-control" 
                           placeholder="Enter security code if enabled">
                </div>
                
                <button id="loginBtn" class="btn-login" onclick="adminLogin()">
                    <i class="fas fa-sign-in-alt"></i> Login to Admin Panel
                </button>
                
                <div class="login-footer">
                    <div class="security-note">
                        <i class="fas fa-shield-alt"></i>
                        <p>This panel is for authorized personnel only. All activities are logged.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-container" style="display: none;">
        <!-- Header -->
        <header class="admin-header diamond-card">
            <div class="header-left">
                <div class="admin-brand">
                    <div class="admin-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div>
                        <h1>VNTT Admin Panel</h1>
                        <p>Administration Dashboard</p>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <div class="admin-info">
                    <div class="admin-status">
                        <i class="fas fa-circle online"></i>
                        <span>Connected</span>
                    </div>
                    <button class="btn-logout" onclick="adminLogout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="admin-content">
            <!-- Sidebar -->
            <aside class="admin-sidebar diamond-card">
                <nav class="admin-nav">
                    <a href="#" class="nav-item active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="verifications">
                        <i class="fas fa-check-circle"></i>
                        <span>Task Verifications</span>
                        <span class="badge" id="pendingBadge">0</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="users">
                        <i class="fas fa-users"></i>
                        <span>User Management</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="withdrawals">
                        <i class="fas fa-wallet"></i>
                        <span>Withdrawals</span>
                        <span class="badge" id="withdrawalBadge">0</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="tasks">
                        <i class="fas fa-tasks"></i>
                        <span>Task Management</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                    
                    <a href="#" class="nav-item" data-tab="logs">
                        <i class="fas fa-history"></i>
                        <span>Activity Logs</span>
                    </a>
                </nav>
                
                <div class="sidebar-footer">
                    <div class="server-info">
                        <h5>Server Status</h5>
                        <div class="status-item">
                            <span>Database:</span>
                            <span class="status-online">Online</span>
                        </div>
                        <div class="status-item">
                            <span>API:</span>
                            <span class="status-online">Online</span>
                        </div>
                        <div class="status-item">
                            <span>Last Backup:</span>
                            <span>Today</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Panel -->
            <main class="admin-main">
                <!-- Dashboard Tab -->
                <section id="dashboardTab" class="tab-content active">
                    <div class="tab-header">
                        <h2><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
                        <div class="tab-actions">
                            <button class="btn-refresh" onclick="refreshDashboard()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn-export" onclick="exportData()">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card diamond-card">
                            <div class="stat-icon total">
                                <i class="fas fa-users"></i>
                            </div>
                            <h3 id="totalUsers">0</h3>
                            <p>Total Users</p>
                            <div class="stat-trend">
                                <i class="fas fa-arrow-up"></i>
                                <span>+12% this week</span>
                            </div>
                        </div>
                        
                        <div class="stat-card diamond-card">
                            <div class="stat-icon active">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <h3 id="activeUsers">0</h3>
                            <p>Active Users</p>
                        </div>
                        
                        <div class="stat-card diamond-card">
                            <div class="stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 id="pendingVerifications">0</h3>
                            <p>Pending Verifications</p>
                        </div>
                        
                        <div class="stat-card diamond-card">
                            <div class="stat-icon revenue">
                                <i class="fas fa-coins"></i>
                            </div>
                            <h3 id="totalRevenue">0 USDT</h3>
                            <p>Total Revenue</p>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-8">
                            <div class="diamond-card chart-card">
                                <h4><i class="fas fa-chart-line"></i> User Growth</h4>
                                <div class="chart-container">
                                    <canvas id="userChart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="diamond-card quick-actions">
                                <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                                <div class="action-list">
                                    <button class="action-btn" onclick="showTab('verifications')">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Review Pending Tasks</span>
                                    </button>
                                    
                                    <button class="action-btn" onclick="showTab('withdrawals')">
                                        <i class="fas fa-wallet"></i>
                                        <span>Process Withdrawals</span>
                                    </button>
                                    
                                    <button class="action-btn" onclick="addNewTask()">
                                        <i class="fas fa-plus-circle"></i>
                                        <span>Add New Task</span>
                                    </button>
                                    
                                    <button class="action-btn" onclick="showTab('settings')">
                                        <i class="fas fa-cog"></i>
                                        <span>Update Settings</span>
                                    </button>
                                    
                                    <button class="action-btn" onclick="backupDatabase()">
                                        <i class="fas fa-database"></i>
                                        <span>Backup Database</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="diamond-card recent-activity mt-4">
                        <h4><i class="fas fa-history"></i> Recent Activity</h4>
                        <div class="activity-list" id="recentActivity">
                            <!-- Activity items will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Verifications Tab -->
                <section id="verificationsTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-check-circle"></i> Task Verifications</h2>
                        <div class="tab-filters">
                            <select class="filter-select" id="verificationFilter">
                                <option value="all">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="verified">Verified</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <button class="btn-refresh" onclick="loadVerifications()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User Address</th>
                                    <th>Task</th>
                                    <th>Platform</th>
                                    <th>Proof</th>
                                    <th>Submitted</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="verificationsTable">
                                <!-- Verifications will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="pagination">
                        <button class="btn-prev" onclick="prevPage()">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="pageInfo">Page 1 of 1</span>
                        <button class="btn-next" onclick="nextPage()">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </section>

                <!-- Users Tab -->
                <section id="usersTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-users"></i> User Management</h2>
                        <div class="tab-actions">
                            <div class="search-box">
                                <input type="text" id="userSearch" placeholder="Search by wallet address...">
                                <button class="btn-search">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                            <button class="btn-export" onclick="exportUsers()">
                                <i class="fas fa-download"></i> Export Users
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Wallet Address</th>
                                    <th>Upline</th>
                                    <th>Join Date</th>
                                    <th>Status</th>
                                    <th>Earned</th>
                                    <th>Withdrawn</th>
                                    <th>Referrals</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTable">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="user-actions mt-4">
                        <div class="action-buttons">
                            <button class="btn-action" onclick="addUser()">
                                <i class="fas fa-user-plus"></i> Add User
                            </button>
                            <button class="btn-action" onclick="bulkActivate()">
                                <i class="fas fa-bolt"></i> Bulk Activate
                            </button>
                            <button class="btn-action" onclick="sendNotification()">
                                <i class="fas fa-bell"></i> Send Notification
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Withdrawals Tab -->
                <section id="withdrawalsTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-wallet"></i> Withdrawal Management</h2>
                        <div class="tab-filters">
                            <select class="filter-select" id="withdrawalFilter">
                                <option value="all">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="completed">Completed</option>
                                <option value="failed">Failed</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User Address</th>
                                    <th>Amount</th>
                                    <th>Fee</th>
                                    <th>Payment Method</th>
                                    <th>Requested</th>
                                    <th>Status</th>
                                    <th>Transaction Hash</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="withdrawalsTable">
                                <!-- Withdrawals will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="withdrawal-stats mt-4">
                        <div class="stats-card">
                            <h5>Today's Withdrawals</h5>
                            <h3 id="todayWithdrawals">0 VNTT</h3>
                        </div>
                        <div class="stats-card">
                            <h5>Total Withdrawn</h5>
                            <h3 id="totalWithdrawn">0 VNTT</h3>
                        </div>
                        <div class="stats-card">
                            <h5>Pending Amount</h5>
                            <h3 id="pendingWithdrawals">0 VNTT</h3>
                        </div>
                    </div>
                </section>

                <!-- Tasks Tab -->
                <section id="tasksTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-tasks"></i> Task Management</h2>
                        <button class="btn-add" onclick="showAddTaskModal()">
                            <i class="fas fa-plus"></i> Add New Task
                        </button>
                    </div>
                    
                    <div class="tasks-management">
                        <div class="task-categories">
                            <button class="category-btn active" data-category="all">All Tasks</button>
                            <button class="category-btn" data-category="facebook">Facebook</button>
                            <button class="category-btn" data-category="twitter">Twitter</button>
                            <button class="category-btn" data-category="instagram">Instagram</button>
                            <button class="category-btn" data-category="youtube">YouTube</button>
                            <button class="category-btn" data-category="telegram">Telegram</button>
                        </div>
                        
                        <div class="tasks-grid" id="tasksGrid">
                            <!-- Tasks will be loaded here -->
                        </div>
                    </div>
                </section>

                <!-- Settings Tab -->
                <section id="settingsTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-cog"></i> Settings</h2>
                        <button class="btn-save" onclick="saveSettings()">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                    
                    <div class="settings-container">
                        <div class="settings-tabs">
                            <button class="settings-tab active" data-tab="general">General</button>
                            <button class="settings-tab" data-tab="fees">Fees & Rewards</button>
                            <button class="settings-tab" data-tab="security">Security</button>
                            <button class="settings-tab" data-tab="notifications">Notifications</button>
                            <button class="settings-tab" data-tab="backup">Backup</button>
                        </div>
                        
                        <!-- General Settings -->
                        <div id="generalSettings" class="settings-content active">
                            <div class="form-group">
                                <label>Site Name</label>
                                <input type="text" class="form-control" id="siteName" value="VNTT Diamond Network">
                            </div>
                            
                            <div class="form-group">
                                <label>Site URL</label>
                                <input type="url" class="form-control" id="siteUrl" value="https://yourdomain.com">
                            </div>
                            
                            <div class="form-group">
                                <label>Admin Email</label>
                                <input type="email" class="form-control" id="adminEmail" value="admin@yourdomain.com">
                            </div>
                            
                            <div class="form-group">
                                <label>Telegram Support Link</label>
                                <input type="url" class="form-control" id="telegramLink" value="https://t.me/vntt_support">
                            </div>
                            
                            <div class="form-group">
                                <label>Maintenance Mode</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="maintenanceMode">
                                    <label for="maintenanceMode"></label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fees & Rewards Settings -->
                        <div id="feesSettings" class="settings-content">
                            <div class="form-group">
                                <label>Activation Fee (USDT)</label>
                                <input type="number" class="form-control" id="activationFee" value="0.30" step="0.01">
                            </div>
                            
                            <div class="form-group">
                                <label>Withdrawal Fee (VNT/USDT)</label>
                                <input type="number" class="form-control" id="withdrawalFee" value="0.10" step="0.01">
                            </div>
                            
                            <div class="form-group">
                                <label>Daily Reward (VNTT)</label>
                                <input type="number" class="form-control" id="dailyReward" value="100">
                            </div>
                            
                            <div class="form-group">
                                <label>Activation Bonus (VNTT)</label>
                                <input type="number" class="form-control" id="activationBonus" value="100">
                            </div>
                            
                            <div class="form-group">
                                <label>Lock Period (Days)</label>
                                <input type="number" class="form-control" id="lockPeriod" value="90">
                            </div>
                        </div>
                        
                        <!-- Security Settings -->
                        <div id="securitySettings" class="settings-content">
                            <div class="form-group">
                                <label>Change Admin Password</label>
                                <input type="password" class="form-control" id="newPassword" placeholder="New password">
                                <input type="password" class="form-control mt-2" id="confirmPassword" placeholder="Confirm password">
                            </div>
                            
                            <div class="form-group">
                                <label>Enable Two-Factor Authentication</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="twoFactor">
                                    <label for="twoFactor"></label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>IP Whitelist</label>
                                <textarea class="form-control" id="ipWhitelist" rows="3" placeholder="Enter allowed IP addresses (one per line)"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label>Session Timeout (Minutes)</label>
                                <input type="number" class="form-control" id="sessionTimeout" value="30">
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Logs Tab -->
                <section id="logsTab" class="tab-content">
                    <div class="tab-header">
                        <h2><i class="fas fa-history"></i> Activity Logs</h2>
                        <div class="tab-filters">
                            <select class="filter-select" id="logFilter">
                                <option value="all">All Activities</option>
                                <option value="admin">Admin Actions</option>
                                <option value="user">User Activities</option>
                                <option value="system">System Events</option>
                            </select>
                            <button class="btn-clear" onclick="clearLogs()">
                                <i class="fas fa-trash"></i> Clear Old Logs
                            </button>
                        </div>
                    </div>
                    
                    <div class="logs-container">
                        <div class="logs-list" id="activityLogs">
                            <!-- Logs will be loaded here -->
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Verification Modal -->
    <div id="verificationModal" class="modal">
        <div class="modal-content diamond-card">
            <div class="modal-header">
                <h4><i class="fas fa-check-circle"></i> Review Verification</h4>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="verificationModalBody">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Add Task Modal -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content diamond-card">
            <div class="modal-header">
                <h4><i class="fas fa-plus-circle"></i> Add New Task</h4>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addTaskForm">
                    <div class="form-group">
                        <label>Task Name</label>
                        <input type="text" class="form-control" name="taskName" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Platform</label>
                        <select class="form-control" name="platform" required>
                            <option value="facebook">Facebook</option>
                            <option value="twitter">Twitter</option>
                            <option value="instagram">Instagram</option>
                            <option value="youtube">YouTube</option>
                            <option value="telegram">Telegram</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Task Type</label>
                        <select class="form-control" name="taskType" required>
                            <option value="follow">Follow/Subscribe</option>
                            <option value="like">Like</option>
                            <option value="share">Share/Retweet</option>
                            <option value="comment">Comment</option>
                            <option value="join">Join</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Reward (VNTT)</label>
                        <input type="number" class="form-control" name="reward" min="10" max="500" value="50" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea class="form-control" name="description" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Active</label>
                        <div class="toggle-switch">
                            <input type="checkbox" name="isActive" checked>
                            <label for="isActive"></label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary">Add Task</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- User Details Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content diamond-card">
            <div class="modal-header">
                <h4><i class="fas fa-user"></i> User Details</h4>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" id="userModalBody">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Notification Toast -->
    <div id="adminToast" class="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="adminToastMessage">Operation successful!</span>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/admin.js"></script>
    
    <script>
        // Hide loading screen after 2 seconds
        setTimeout(() => {
            document.getElementById('adminLoading').style.display = 'none';
        }, 2000);
        
        // Check if already logged in
        if (localStorage.getItem('adminLoggedIn') === 'true') {
            showAdminPanel();
        }
    </script>
</body>
</html>
